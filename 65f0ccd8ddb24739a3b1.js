import*as DOM from"./DOM.js";import{Game}from"./Game.js";import"../styles.css";import{Player,CPU}from"./player.js";import{listeners}from"./listeners.js";function drawSiteDefault(){DOM.removeBoard();let e=new Player("default"),a=new CPU;DOM.renderBoard(10,e,cachedDOM.playerBoard),DOM.renderBoard(10,a,cachedDOM.cpuBoard),cachedDOM.cpuBoard.classList.add("inactive"),cachedDOM.playerBoard.classList.add("inactive"),DOM.printLog("Start a new game!"),DOM.printScores("","",cachedDOM)}function startGame(){cachedDOM.cpuBoard.classList.remove("inactive"),cachedDOM.playerBoard.classList.remove("inactive"),DOM.removeBoard();let e=new Game;return e.initialize(),DOM.renderBoard(10,e.player,cachedDOM.playerBoard),DOM.renderBoard(10,e.cpu,cachedDOM.cpuBoard),DOM.printScores(0,0,cachedDOM),loadListener(),e}function gameDriver(e){DOM.removeBoard();let a=game.playerTurn(e),r=game.cpuTurn();DOM.renderBoard(10,game.player,cachedDOM.playerBoard),DOM.renderBoard(10,game.cpu,cachedDOM.cpuBoard),DOM.printScores(game.cpu.checkShips(),game.player.checkShips(),cachedDOM),DOM.printLog(a),DOM.printLog(r);let c=game.player.checkShips(),o=game.cpu.checkShips();c!==Player.maxShips&&o!==CPU.maxShips?loadListener():DOM.printLog(game.gameOver())}function loadListener(){listeners.board(e=>{game.isRunning=!0,gameDriver(game.userInput(e))})}let game;console.log("Success! Javascript connected!");const cachedDOM=DOM.cacheDOM();drawSiteDefault(),listeners.resetButton(()=>{game&&0==game.isRunning&&(game.player.initializeBoard(),DOM.removeBoard(),DOM.renderBoard(10,game.player,cachedDOM.playerBoard),DOM.renderBoard(10,game.cpu,cachedDOM.cpuBoard),loadListener())}),listeners.startButton(()=>{game=startGame(),DOM.clearLog()});